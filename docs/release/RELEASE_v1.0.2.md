# GitHub Release v1.0.2

## Release Title
```
v1.0.2 - 修復版本檢查功能
```

## Release Notes

### 🐛 重要 Bug 修正版本

此版本修正版本檢查功能的兩個重要問題,確保每次啟動應用程式時都能正確檢查並通知更新。

---

### 🐛 修正內容

#### 問題 1: 版本檢查日誌等級過低

**問題描述**:
- 在 v1.0.0 和 v1.0.1 中,版本檢查使用 `logger.debug()` 記錄訊息
- 由於日誌等級設定為 `INFO`,導致版本檢查訊息不會被記錄
- 使用者無法確認版本檢查是否正常執行

**修正內容**:
- ✅ 將版本檢查日誌等級從 `debug` 提升為 `info`
- ✅ 版本檢查失敗時使用 `warning` 等級記錄
- ✅ 添加更詳細的版本檢查狀態訊息

#### 問題 2: 快取機制導致不檢查更新 ⚠️

**問題描述**:
- v1.0.0 和 v1.0.1 使用 6 小時快取機制
- 如果在 6 小時內再次啟動,會直接使用快取,**不會檢查新版本**
- 即使修改日誌時間為前一天,仍然會因快取而不檢查
- 這導致使用者可能錯過重要更新通知

**修正內容**:
- ✅ **移除快取機制,每次啟動都檢查最新版本**
- ✅ 確保使用者能及時收到更新通知
- ✅ API 請求有 5 秒超時保護,不影響啟動速度

#### 新增功能: 可點擊的下載連結 🔗

**改進內容**:
- ✅ 更新對話框中顯示可點擊的下載連結
- ✅ 超連結以藍色底線文字顯示 (符合網頁習慣)
- ✅ 游標移到連結上會變成手型 (`cursor="hand2"`)
- ✅ 點擊連結直接開啟瀏覽器下載頁面
- ✅ Release URL 也會顯示,方便查看完整說明

---

### 📊 技術改進

#### 日誌可見性提升
- 版本檢查開始時記錄 `INFO` 訊息
- 檢查完成時記錄結果 (有更新 / 已是最新版)
- 發現新版本時記錄詳細資訊
- 檢查失敗時記錄 `WARNING` 而非靜默失敗

#### 測試覆蓋率
- 新增 UI 版本檢查測試 (`tests/test_version_check_ui.py`)
- 測試啟動時版本檢查
- 測試有更新時顯示對話框
- 測試沒有更新時不顯示對話框
- 測試檢查失敗時程式繼續運行

---

### 📦 安裝與使用

#### 下載
請從本頁面的 Assets 區下載 `overtime-assistant-1.0.2.exe`

#### 使用方式
1. 下載 `overtime-assistant-1.0.2.exe`
2. 雙擊執行
3. 啟動時會自動檢查更新 (約 1 秒後)
4. 如有新版本會彈出通知對話框

---

### 🔄 從 v1.0.1 升級

**升級原因**: 強烈建議升級!

- **v1.0.1 問題**: 版本檢查功能缺乏日誌,無法確認是否正常運作
- **v1.0.2 改進**: 完整的版本檢查日誌,可追蹤檢查狀態

**升級方式**:
1. 下載 `overtime-assistant-1.0.2.exe`
2. 直接替換舊版執行檔
3. 啟動後檢查日誌檔案 (`logs/overtime_calculator.log`) 確認版本檢查運作正常

---

### ✨ 完整功能說明

此版本包含所有 v1.0.0 和 v1.0.1 的功能:

#### 核心功能
- 🎨 現代化 GUI 介面 (CustomTkinter 深色主題)
- 🔐 智慧登入系統
- 📊 自動計算加班時數
- 📋 便利的複製功能
- 💾 Excel 報表匯出
- 🔄 **自動版本檢查 (已修復)** ⭐

#### 技術特性
- 🏗️ MVC 模組化架構
- ✅ 44 個單元測試
- 📦 單一執行檔封裝
- 🎯 動態版本號管理

---

### 📝 版本比較

| 版本 | 版本檢查 | 日誌記錄 | 說明 |
|------|---------|---------|------|
| v1.0.0 | ✅ | ❌ `debug` 等級 | 首個正式版 |
| v1.0.1 | ✅ | ❌ `debug` 等級 | 修正檔名 |
| v1.0.2 | ✅ | ✅ `info` 等級 | **修復版本檢查日誌** ⭐ |

---

### 🔍 驗證版本檢查運作

安裝 v1.0.2 後,您可以透過以下方式確認版本檢查正常運作:

#### 方法 1: 檢查日誌檔案
```
開啟: logs/overtime_calculator.log

應該看到:
2025-XX-XX XX:XX:XX,XXX - INFO - 開始檢查應用程式更新...
2025-XX-XX XX:XX:XX,XXX - INFO - 檢查更新: https://api.github.com/repos/jony-zhou/overtime-assistant/releases/latest
2025-XX-XX XX:XX:XX,XXX - INFO - 已是最新版本: 1.0.2
```

#### 方法 2: 模擬有新版本
當 GitHub 上發布 v1.0.3 時,啟動 v1.0.2 應該會:
1. 彈出更新通知對話框
2. 日誌記錄: `發現新版本 1.0.3,顯示更新對話框`

---

### 📊 版本資訊

- **版本號**: v1.0.2
- **發布日期**: 2025-11-21
- **變更類型**: Bug Fix (修訂版本)
- **相容性**: Windows 10/11 (64-bit)
- **檔案大小**: 約 50-100 MB
- **重要性**: **建議升級** ⭐

---

### 🙏 感謝

感謝使用者回饋版本檢查功能的日誌問題,幫助我們改進產品品質。

---

### 💬 支援

- 🐛 回報問題: [GitHub Issues](https://github.com/jony-zhou/overtime-assistant/issues)
- 💡 功能建議: [GitHub Discussions](https://github.com/jony-zhou/overtime-assistant/discussions)
- 📖 文件: [README](https://github.com/jony-zhou/overtime-assistant/blob/main/readme.md)

---

**重要更新,建議所有 v1.0.0 和 v1.0.1 使用者升級** 🔧✨
